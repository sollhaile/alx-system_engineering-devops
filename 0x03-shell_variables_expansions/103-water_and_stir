#!/bin/bash
water_base=5
stir_base=4
bestchol_base=8

# Function to convert a string from a given base to decimal
to_decimal() {
    local str=$1
    local base=$2
    local chars=$3
    local length=${#str}
    local decimal=0
    for (( i=0; i<$length; i++ )); do
        char=${str:$i:1}
        value=$(echo $chars | grep -o . | grep -n $char | cut -d: -f1)
        value=$((value - 1))
        decimal=$((decimal * base + value))
    done
    echo $decimal
}

# Convert WATER from base water (5) to decimal
water_chars="water"
water_decimal=$(to_decimal $WATER $water_base $water_chars)

# Convert STIR from base stir (4) to decimal
stir_chars="stir"
stir_decimal=$(to_decimal $STIR $stir_base $stir_chars)

# Add the two decimal numbers
total=$((water_decimal + stir_decimal))

# Function to convert decimal to a given base
to_base() {
    local decimal=$1
    local base=$2
    local chars=$3
    local result=""
    if [ $decimal -eq 0 ]; then
        result=${chars:0:1}
    else
        while [ $decimal -gt 0 ]; do
            remainder=$((decimal % base))
            char=${chars:$remainder:1}
            result=$char$result
            decimal=$((decimal / base))
        done
    fi
    echo $result
}

# Convert the total to base bestchol (8)
bestchol_chars="bestchol"
echo $(to_base $total $bestchol_base $bestchol_chars)
